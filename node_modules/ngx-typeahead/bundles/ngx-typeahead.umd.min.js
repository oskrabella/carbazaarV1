!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common/http"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-typeahead",["exports","@angular/common/http","@angular/core","rxjs","rxjs/operators","@angular/common"],e):e((t=t||self)["ngx-typeahead"]={},t.ng.common.http,t.ng.core,t.rxjs,t.rxjs.operators,t.ng.common)}(this,(function(t,e,n,i,o,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var r,a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function u(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r}function p(t){return t.code===r.Enter}!function(t){t.Backspace="Backspace",t.Tab="Tab",t.Enter="Enter",t.ShiftLeft="ShiftLeft",t.ShiftRight="ShiftRight",t.Escape="Escape",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.MetaLeft="MetaLeft",t.MetaRight="MetaRight"}(r||(r={}));function c(t){return t[1]}function l(t){return t.map((function(t){return t[0]}))}function h(t){return t.target.value}var g=function(){function t(t,e,o,s){this.element=t,this.viewContainer=e,this.http=o,this.cdr=s,this.showSuggestions=!1,this.results=[],this.taUrl="",this.taParams={},this.taQueryParam="q",this.taApi="jsonp",this.taApiMethod="get",this.taList=[],this.taListItemField=[],this.taListItemLabel="",this.taDebounce=300,this.taAllowEmpty=!1,this.taCaseSensitive=!1,this.taDisplayOnFocus=!1,this.taSelected=new n.EventEmitter,this.suggestionIndex=0,this.subscriptions=[],this.activeResult="",this.searchQuery="",this.selectedItem={},this.resultsAsItems=[],this.keydown$=new i.Subject,this.keyup$=new i.Subject}return t.prototype.handleEsc=function(t){(function(t){return t.code===r.Escape})(t)&&(this.hideSuggestions(),t.preventDefault()),this.keydown$.next(t)},t.prototype.onkeyup=function(t){t.preventDefault(),t.stopPropagation(),this.keyup$.next(t)},t.prototype.onClick=function(){this.taDisplayOnFocus&&this.displaySuggestions()},t.prototype.ngOnInit=function(){this.filterEnterEvent(this.keydown$),this.listenAndSuggest(this.keyup$),this.navigateWithArrows(this.keydown$),this.renderTemplate()},t.prototype.ngOnDestroy=function(){this.keydown$.complete(),this.keyup$.complete()},t.prototype.renderTemplate=function(){this.suggestionsTplRef?(this.viewContainer.createEmbeddedView(this.suggestionsTplRef),this.cdr.markForCheck()):console.error("NO NGXTA Template Found. Requires NG9")},t.prototype.listenAndSuggest=function(t){var e=this;t.pipe(o.filter((function(t){return e=t.code,[r.Enter,r.Tab,r.ShiftLeft,r.ShiftRight,r.ArrowLeft,r.ArrowUp,r.ArrowRight,r.ArrowDown,r.MetaLeft,r.MetaRight].every((function(t){return t!==e}));var e})),o.map(h),o.debounceTime(this.taDebounce),o.concat(),o.distinctUntilChanged(),o.filter((function(t){return e.taAllowEmpty||function(t){return t.length>0}(t)})),o.tap((function(t){return e.searchQuery=t})),o.switchMap((function(t){return e.suggest(t)}))).subscribe((function(t){e.assignResults(t),e.displaySuggestions()}))},t.prototype.assignResults=function(t){var e=this.taListItemLabel;this.resultsAsItems=t,this.results=t.map((function(t){return e?t[e]:t})),this.suggestionIndex=-1,t&&t.length||(this.activeResult=this.searchQuery)},t.prototype.filterEnterEvent=function(t){var e=this;t.pipe(o.filter(p)).subscribe((function(t){e.handleSelectSuggestion(e.activeResult)}))},t.prototype.navigateWithArrows=function(t){var e=this;t.pipe(o.map((function(t){return t.key})),o.filter((function(t){return(e=t)===r.ArrowDown||e===r.ArrowUp;var e}))).subscribe((function(t){e.updateIndex(t),e.displaySuggestions()}))},t.prototype.updateIndex=function(t){this.suggestionIndex=function(t,e,n){void 0===n&&(n=10);var i=n-1,o=t+(e?1:-1),s=o;return o===i+1&&(s=-1),-2===o&&(s=i),s}(this.suggestionIndex,t===r.ArrowDown,this.results.length)},t.prototype.displaySuggestions=function(){this.showSuggestions=!0,this.cdr.markForCheck()},t.prototype.suggest=function(t){return this.taList.length?this.createListSource(this.taList,t):this.request(t)},t.prototype.request=function(t){var n=this.taUrl,i={params:function(t,n,i){var o;void 0===n&&(n="q"),void 0===i&&(i={});var s=a(((o={})[n]=t,o),i);return Object.keys(s).reduce((function(t,e){return t.set(e,s[e])}),new e.HttpParams)}(t,this.taQueryParam,this.taParams)};return"jsonp"===this.taApi?this.requestJsonp(n,i,this.taCallbackParamValue):this.requestHttp(n,i)},t.prototype.requestHttp=function(t,e){var n,i=(void 0===(n=this.taApiMethod)&&(n=""),["get","post","put","delete","patch","request"].some((function(t){return n===t}))?n:"get");return this.http[i](t,e)},t.prototype.requestJsonp=function(t,e,n){void 0===n&&(n="callback");var i=e.params.toString();return this.http.jsonp(t+"?"+i,n).pipe(o.map(c),o.map(l))},t.prototype.markIsActive=function(t,e){var n=function(t,e){return t===e}(t,this.suggestionIndex);return n&&(this.activeResult=e),n},t.prototype.handleSelectionClick=function(t,e){this.suggestionIndex=e,this.handleSelectSuggestion(t)},t.prototype.handleSelectSuggestion=function(t){var e=this.resultsAsItems.length?this.resultsAsItems[this.suggestionIndex]:t;this.hideSuggestions();var n=-1===this.suggestionIndex?this.searchQuery:e;this.taSelected.emit(n)},t.prototype.hideSuggestions=function(){this.showSuggestions=!1},t.prototype.hasItemTemplate=function(){return void 0!==this.taItemTpl},t.prototype.createListSource=function(t,e){var n=this,o=this.taCaseSensitive?e:e.toLowerCase(),s=this.taListItemField;return i.of(t.filter((function(t){return function(t,e,n){void 0===n&&(n=!1);var i=t;return t.hasOwnProperty("length")||(i=(e.length?e:Object.keys(t)).reduce((function(e,n){return""+e+t[n]}),"")),n?i:i.toLowerCase()}(t,s,n.taCaseSensitive).includes(o)})))},t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.ViewContainerRef},{type:e.HttpClient},{type:n.ChangeDetectorRef}]},u([n.Input()],t.prototype,"taItemTpl",void 0),u([n.Input()],t.prototype,"taUrl",void 0),u([n.Input()],t.prototype,"taParams",void 0),u([n.Input()],t.prototype,"taQueryParam",void 0),u([n.Input()],t.prototype,"taCallbackParamValue",void 0),u([n.Input()],t.prototype,"taApi",void 0),u([n.Input()],t.prototype,"taApiMethod",void 0),u([n.Input()],t.prototype,"taList",void 0),u([n.Input()],t.prototype,"taListItemField",void 0),u([n.Input()],t.prototype,"taListItemLabel",void 0),u([n.Input()],t.prototype,"taDebounce",void 0),u([n.Input()],t.prototype,"taAllowEmpty",void 0),u([n.Input()],t.prototype,"taCaseSensitive",void 0),u([n.Input()],t.prototype,"taDisplayOnFocus",void 0),u([n.Output()],t.prototype,"taSelected",void 0),u([n.ViewChild(n.TemplateRef,{static:!0})],t.prototype,"suggestionsTplRef",void 0),u([n.HostListener("keydown",["$event"])],t.prototype,"handleEsc",null),u([n.HostListener("keyup",["$event"])],t.prototype,"onkeyup",null),u([n.HostListener("click")],t.prototype,"onClick",null),t=u([n.Component({selector:"ngx-typeahead, [ngxTypeahead]",template:'\n    <ng-template #suggestionsTplRef>\n      <section class="ta-results list-group" *ngIf="showSuggestions">\n        <div class="ta-backdrop" (click)="hideSuggestions()"></div>\n        <button\n          type="button"\n          class="ta-item list-group-item"\n          *ngFor="let result of results; let i = index"\n          [class.active]="markIsActive(i, result)"\n          (click)="handleSelectionClick(result, i)"\n        >\n          <span *ngIf="!taItemTpl"\n            ><i class="fa fa-search"></i> {{ result }}</span\n          >\n          <ng-template\n            [ngTemplateOutlet]="taItemTpl"\n            [ngTemplateOutletContext]="{\n              $implicit: { result: result, index: i }\n            }"\n          ></ng-template>\n        </button>\n      </section>\n    </ng-template>\n  ',styles:["\n      .ta-results {\n        position: absolute;\n      }\n      .ta-backdrop {\n        bottom: 0;\n        left: 0;\n        position: fixed;\n        right: 0;\n        top: 0;\n        z-index: 1;\n      }\n      .ta-item {\n        position: relative;\n        z-index: 2;\n        display: block;\n      }\n    "]})],t)}(),d=function(){function t(){}return t=u([n.NgModule({declarations:[g],imports:[s.CommonModule,e.HttpClientModule,e.HttpClientJsonpModule],exports:[g,s.CommonModule]})],t)}();t.NgxTypeAheadComponent=g,t.NgxTypeaheadModule=d,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-typeahead.umd.min.js.map